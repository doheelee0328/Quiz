"use strict";(self.webpackChunksmart_duck=self.webpackChunksmart_duck||[]).push([[447],{6322:function(e,t,n){n(2791),n(8689);var r=n(184);t.Z=function(e){var t=e.title,n=e.onClick,s=e.dataCy,c=e.active;return(0,r.jsx)("button",{className:"character-button ".concat(c?"active":""),onClick:n,"data-cy":s,children:t})}},447:function(e,t,n){n.r(t),n.d(t,{default:function(){return v}});var r=n(3433),s=n(4165),c=n(5861),a=n(9439),i=n(2791),o=n(4420),u=n(6318),l=n(6322),f=n(7689),d=(n(8689),n(2272)),h=n(184),m=function(){return(0,h.jsx)(d.iT,{visible:!0,height:"100",width:"100",color:"#ffd256",secondaryColor:"#ffd256",ariaLabel:"oval-loading"})},v=function(){var e=(0,i.useState)([]),t=(0,a.Z)(e,2),n=t[0],d=t[1],v=(0,i.useState)(!0),p=(0,a.Z)(v,2),x=p[0],j=p[1],Z=(0,i.useState)(""),g=(0,a.Z)(Z,2),k=g[0],N=g[1],b=(0,i.useState)(0),w=(0,a.Z)(b,2),S=w[0],q=w[1],y=(0,i.useState)([]),C=(0,a.Z)(y,2),I=C[0],_=C[1],E=(0,i.useState)(""),T=(0,a.Z)(E,2),P=T[0],A=T[1],Q=(0,i.useState)(20),z=(0,a.Z)(Q,2),D=z[0],F=z[1],L=(0,o.v9)((function(e){return e.questionSlice.selectedCategory})),M=(0,o.v9)((function(e){return e.questionSlice.selectedDifficulty})),R=(0,o.v9)((function(e){return e.questionSlice.score})),Y=(0,f.s0)(),B=(0,o.I0)(),G=function(){var e=(0,c.Z)((0,s.Z)().mark((function e(){var t,n,r,c,a,i=arguments;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:3,e.prev=1,e.next=4,fetch("https://opentdb.com/api.php?amount=5&category=".concat(L.id,"&difficulty=").concat(M,"&type=multiple"));case 4:if(429!==(n=e.sent).status){e.next=10;break}return r=n.headers.get("Retry-After"),c=r?1e3*parseInt(r):1e3,t>0?setTimeout((function(){G(t-1)}),c):(console.error("API rate limit exceeded"),j(!1)),e.abrupt("return");case 10:return e.next=12,n.json();case 12:a=e.sent,d(a.results),j(!1),e.next=21;break;case 17:e.prev=17,e.t0=e.catch(1),console.error(e.t0),t>0?setTimeout((function(){G(t-1)}),1e3):(console.error("Error fetching data"),j(!1));case 21:case"end":return e.stop()}}),e,null,[[1,17]])})));return function(){return e.apply(this,arguments)}}();(0,i.useEffect)((function(){if(n.length>0){var e=H(n[S].correct_answer,n[S].incorrect_answers);_(e),F(20)}}),[n,S]);var H=function(e,t){return[].concat((0,r.Z)(t),[e]).sort((function(){return Math.random()-.5}))};return(0,i.useEffect)((function(){var e=setInterval((function(){F((function(t){if(0===t){if(clearInterval(e),S!==n.length-1)return q(S+1),A(""),20;Y("/completed")}return t-1}))}),1e3);return function(){return clearInterval(e)}}),[S,n]),(0,i.useEffect)((function(){G()}),[]),(0,h.jsx)("div",{children:x?(0,h.jsx)("div",{className:"spinner",children:(0,h.jsx)(m,{})}):n&&n.length>0&&(0,h.jsx)("div",{children:(0,h.jsxs)("div",{className:"questions-container",children:[(0,h.jsxs)("p",{className:"timer-container",children:["Time left ",(0,h.jsx)("span",{className:"timer",children:D})]}),(0,h.jsxs)("div",{className:"question-answer-container",children:[(0,h.jsx)("p",{className:"questions",children:n[S].question}),(0,h.jsx)("div",{className:"questions-answers",children:I.map((function(e,t){return(0,h.jsx)(h.Fragment,{children:(0,h.jsx)(l.Z,{title:e,onClick:function(){return function(e,t){N(e),e===t&&B((0,u.ts)(R+1))}(e,n[S].correct_answer)},active:k===e},t)})}))}),S===n.length-1?(0,h.jsx)(l.Z,{title:"Submit Quiz",onClick:function(){k?(Y("/completed"),A("")):A("Please select an answer")}}):(0,h.jsx)(l.Z,{title:"Next Question",onClick:function(){k?S<n.length-1&&(q(S+1),N(""),A(""),F(20)):A("Please select an answer")}})]}),(0,h.jsxs)("div",{className:"bottom-container",children:[k?(0,h.jsx)("p",{className:"selected-option",children:"You have selected ".concat(k)}):P&&(0,h.jsx)("p",{className:"error-selected-message",children:P}),(0,h.jsx)("p",{className:"out-of-questions",children:"".concat(S+1,"/5 questions")})]})]})})})}},8689:function(){}}]);
//# sourceMappingURL=447.f8701c3e.chunk.js.map