{"ast":null,"code":"import _toConsumableArray from\"/Users/doheelee/Quiz/client/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"/Users/doheelee/Quiz/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import{useNavigate}from'react-router-dom';import Button from'../components/Buttons';import{useSelector}from'react-redux';import{socket}from'../socket/index';import{useDispatch}from'react-redux';import{setPlayersInRoom}from'../slices/player';import MessageLogo from'../images/send-message-icon.png';import'../scss/main.scss';import LobbyStatus from'../components/LobbyStatus';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Lobby=function Lobby(){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),message=_useState2[0],setMessage=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),errorMessage=_useState4[0],setErrorMessage=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),messages=_useState6[0],setMessages=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),showMessage=_useState8[0],setShowMessage=_useState8[1];var selectedRoom=useSelector(function(state){return state.playerSlice.gamingRoom;});var playersInRoom=useSelector(function(state){return state.playerSlice.playersInRoom;});var selectedCharacter=useSelector(function(state){return state.characterSlice.character;});var hostName=useSelector(function(state){return state.playerSlice.hostName;});var selectedCategory=useSelector(function(state){return state.questionSlice.selectedCategory;});var difficulty=useSelector(function(state){return state.questionSlice.selectedDifficulty;});var dispatch=useDispatch();var navigate=useNavigate();useEffect(function(){socket.on('update-nicknames',function(updatedNicknames){dispatch(setPlayersInRoom(updatedNicknames));});socket.on('previous-messages',function(previousMessages){setMessages(previousMessages);});var receiveMessageHandler=function receiveMessageHandler(_ref){var senderNickname=_ref.nickname,message=_ref.message,character=_ref.character;setMessages(function(prevMessages){return[].concat(_toConsumableArray(prevMessages),[{nickname:senderNickname,message:message,character:character}]);});};socket.on('receive-message',receiveMessageHandler);socket.on('start-game',function(){navigate('/rules');});return function(){socket.off('update-nicknames');socket.off('receive-message',receiveMessageHandler);socket.off('playerData');socket.off('start-game');};},[]);var navigateToQuestionPage=function navigateToQuestionPage(){socket.emit('start-game',selectedRoom);};var submitMessageHandler=function submitMessageHandler(){if(!message){setErrorMessage('Please enter your message');return;}socket.emit('send-message',message,selectedRoom,selectedCharacter);setMessage('');};return/*#__PURE__*/_jsxs(\"div\",{className:\"lobby-container\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"lobby-title\",children:\"Lobby\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"players-container\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"number-of-players\",children:[\"Players in room:\",/*#__PURE__*/_jsx(\"span\",{className:\"length-of-players\",children:playersInRoom.length})]}),/*#__PURE__*/_jsx(LobbyStatus,{host:hostName}),playersInRoom.map(function(playerInfo,index){return/*#__PURE__*/_jsxs(\"p\",{className:\"players\",children:[\"Player name: \",playerInfo]},index);})]}),showMessage&&/*#__PURE__*/_jsxs(\"div\",{className:\"logo-message-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"lobby-message-box\",children:messages.map(function(_ref2,index){var nickname=_ref2.nickname,message=_ref2.message,character=_ref2.character;return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"character-message-container\",children:[/*#__PURE__*/_jsx(\"img\",{src:character,alt:\"chosen-character-images\",className:\"character-image\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"chat-message\",children:[nickname,\":\"]}),/*#__PURE__*/_jsx(\"span\",{className:\"chat-message\",children:message})]})},index);})}),/*#__PURE__*/_jsxs(\"div\",{className:\"lobby-input-message-container\",children:[/*#__PURE__*/_jsx(\"input\",{onChange:function onChange(e){return setMessage(e.target.value);},value:message,className:\"lobby-input \",placeholder:\"Enter your message\"}),/*#__PURE__*/_jsx(\"img\",{src:MessageLogo,alt:\"message-logo\",className:\"message-logo\",onClick:submitMessageHandler})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"lobby-button-container\",children:[hostName&&/*#__PURE__*/_jsx(Button,{title:\"Start The Quiz\",onClick:navigateToQuestionPage}),/*#__PURE__*/_jsx(Button,{title:\"Send Messages To Your Players\",onClick:function onClick(){return setShowMessage(!showMessage);}})]}),/*#__PURE__*/_jsx(\"p\",{className:\"lobby-message\",children:errorMessage&&errorMessage}),/*#__PURE__*/_jsx(\"p\",{className:\"selected-level-category\",children:selectedCategory&&difficulty&&\"The host has selected \".concat(selectedCategory.name,\" with the level of \").concat(difficulty)})]});};export default Lobby;","map":{"version":3,"names":["React","useState","useEffect","useNavigate","Button","useSelector","socket","useDispatch","setPlayersInRoom","MessageLogo","LobbyStatus","jsx","_jsx","jsxs","_jsxs","Lobby","_useState","_useState2","_slicedToArray","message","setMessage","_useState3","_useState4","errorMessage","setErrorMessage","_useState5","_useState6","messages","setMessages","_useState7","_useState8","showMessage","setShowMessage","selectedRoom","state","playerSlice","gamingRoom","playersInRoom","selectedCharacter","characterSlice","character","hostName","selectedCategory","questionSlice","difficulty","selectedDifficulty","dispatch","navigate","on","updatedNicknames","previousMessages","receiveMessageHandler","_ref","senderNickname","nickname","prevMessages","concat","_toConsumableArray","off","navigateToQuestionPage","emit","submitMessageHandler","className","children","length","host","map","playerInfo","index","_ref2","src","alt","onChange","e","target","value","placeholder","onClick","title","name"],"sources":["/Users/doheelee/Quiz/client/src/pages/Lobby.tsx"],"sourcesContent":["import React, { useState, useEffect, useRef, useReducer } from 'react'\nimport { useNavigate } from 'react-router-dom'\nimport Button from '../components/Buttons'\nimport { useSelector } from 'react-redux'\nimport { socket } from '../socket/index'\nimport { useDispatch } from 'react-redux'\nimport { setPlayersInRoom } from '../slices/player'\nimport MessageLogo from '../images/send-message-icon.png'\nimport '../scss/main.scss'\nimport LobbyStatus from '../components/LobbyStatus'\n\ninterface MessagesState {\n  nickname: string\n  message: string\n  character: string\n}\n\nconst Lobby = () => {\n  const [message, setMessage] = useState<string>('')\n  const [errorMessage, setErrorMessage] = useState<string>('')\n  const [messages, setMessages] = useState<Array<MessagesState>>([])\n  const [showMessage, setShowMessage] = useState<boolean>(false)\n\n  const selectedRoom = useSelector((state: any) => state.playerSlice.gamingRoom)\n  const playersInRoom = useSelector(\n    (state: any) => state.playerSlice.playersInRoom\n  )\n  const selectedCharacter = useSelector(\n    (state: any) => state.characterSlice.character\n  )\n  const hostName = useSelector((state: any) => state.playerSlice.hostName)\n  const selectedCategory = useSelector(\n    (state: any) => state.questionSlice.selectedCategory\n  )\n  const difficulty = useSelector(\n    (state: any) => state.questionSlice.selectedDifficulty\n  )\n\n  const dispatch = useDispatch()\n  const navigate = useNavigate()\n\n  useEffect(() => {\n    socket.on('update-nicknames', (updatedNicknames) => {\n      dispatch(setPlayersInRoom(updatedNicknames))\n    })\n\n    socket.on('previous-messages', (previousMessages) => {\n      setMessages(previousMessages)\n    })\n\n    const receiveMessageHandler = ({\n      nickname: senderNickname,\n      message,\n      character,\n    }: {\n      nickname: string\n      message: string\n      character: string\n    }) => {\n      setMessages((prevMessages) => [\n        ...prevMessages,\n        { nickname: senderNickname, message, character },\n      ])\n    }\n\n    socket.on('receive-message', receiveMessageHandler)\n    socket.on('start-game', () => {\n      navigate('/rules')\n    })\n\n    return () => {\n      socket.off('update-nicknames')\n      socket.off('receive-message', receiveMessageHandler)\n      socket.off('playerData')\n      socket.off('start-game')\n    }\n  }, [])\n\n  const navigateToQuestionPage = () => {\n    socket.emit('start-game', selectedRoom)\n  }\n\n  const submitMessageHandler = () => {\n    if (!message) {\n      setErrorMessage('Please enter your message')\n      return\n    }\n    socket.emit('send-message', message, selectedRoom, selectedCharacter)\n    setMessage('')\n  }\n\n  return (\n    <div className='lobby-container'>\n      <h1 className='lobby-title'>Lobby</h1>\n\n      <div className='players-container'>\n        <h3 className='number-of-players'>\n          Players in room:\n          <span className='length-of-players'>{playersInRoom.length}</span>\n        </h3>\n\n        <LobbyStatus host={hostName} />\n        {playersInRoom.map((playerInfo: string, index: number) => (\n          <p className='players' key={index}>\n            Player name: {playerInfo}\n          </p>\n        ))}\n      </div>\n      {showMessage && (\n        <div className='logo-message-container'>\n          <div className='lobby-message-box'>\n            {messages.map(({ nickname, message, character }, index) => (\n              <div key={index}>\n                <div className='character-message-container'>\n                  <img\n                    src={character}\n                    alt='chosen-character-images'\n                    className='character-image'\n                  />\n                  <span className='chat-message'>{nickname}:</span>\n                  <span className='chat-message'>{message}</span>\n                </div>\n              </div>\n            ))}\n          </div>\n          <div className='lobby-input-message-container'>\n            <input\n              onChange={(e) => setMessage(e.target.value)}\n              value={message}\n              className='lobby-input '\n              placeholder='Enter your message'\n            />\n            <img\n              src={MessageLogo}\n              alt='message-logo'\n              className='message-logo'\n              onClick={submitMessageHandler}\n            />\n          </div>\n        </div>\n      )}\n\n      <div className='lobby-button-container'>\n        {hostName && (\n          <Button title='Start The Quiz' onClick={navigateToQuestionPage} />\n        )}\n\n        <Button\n          title='Send Messages To Your Players'\n          onClick={() => setShowMessage(!showMessage)}\n        />\n      </div>\n      <p className='lobby-message'>{errorMessage && errorMessage}</p>\n      <p className='selected-level-category'>\n        {selectedCategory &&\n          difficulty &&\n          `The host has selected ${selectedCategory.name} with the level of ${difficulty}`}\n      </p>\n    </div>\n  )\n}\n\nexport default Lobby\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}